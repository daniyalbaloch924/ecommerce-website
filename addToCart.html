<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="shortcut icon" href="https://cdn-icons-png.flaticon.com/512/8866/8866156.png" type="image/x-icon">
    <title>Add to Cart</title>

    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="aboutUs.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">

    <style>
        #video-background {
        position: fixed;
        top: 0;
        left: 0;
        min-width: 100%;
        min-height: 100%;
        object-fit: cover;
        z-index: -1;
        }
      
        .content-wrapper {
        position: relative;
        z-index: 1;
        }
        </style>


</head>

<body>

    <video id="video-background" autoplay loop muted src="/mountain video.mp4">

    </video>

    <!-- Fancy Navbar with Gradient and Animations -->
    <header class="sticky top-0 z-50  bg-[#7AE2CF] shadow-lg transition-all duration-500">
        <div class="max-w-7xl mx-auto px-6 py-4 flex items-center justify-between">
            <!-- Logo -->

            <a href="ecommerce.html">
                <div class="flex gap-2 tracking-wide hover:scale-105 transform transition duration-300 cursor-pointer">

                    <img src="https://cdn-icons-png.flaticon.com/512/8866/8866156.png" alt="" class="h-10 w-10">
                    <h1 class="text-white text-3xl font-bold">
                        E-commerce
                    </h1>
                </div>
            </a>

            <!-- Navigation -->
            <nav class="hidden md:flex space-x-8 text-white font-semibold text-lg pr-16">
                <a href="index.html" class="relative group">
                    <span class="group-hover:text-[#0D3B66] transition duration-300">Home</span>
                    <span
                        class="absolute left-0 -bottom-1 w-0 h-1 bg-[#0D3B66] group-hover:w-full transition-all duration-300 ease-in-out rounded"></span>
                </a>
                <a href="contactUspage.html" class="relative group">
                    <span class="group-hover:text-[#0D3B66] transition duration-300">Contact</span>
                    <span
                        class="absolute left-0 -bottom-1 w-0 h-1 bg-[#0D3B66] group-hover:w-full transition-all duration-300 ease-in-out rounded"></span>
                </a>
                <a href="aboutUs.html" class="relative group">
                    <span class="group-hover:text-[#0D3B66] transition duration-300">About</span>
                    <span
                        class="absolute left-0 -bottom-1 w-0 h-1 bg-[#0D3B66] group-hover:w-full transition-all duration-300 ease-in-out rounded"></span>
                </a>
            </nav>

            <!-- Icons -->
            <div class="flex items-center space-x-6 text-white text-2xl">
                <a href="wishList.html"
                    class="hover:text-[#0D3B66] tracking-wide hover:scale-105 transform transition duration-300">
                    <i class="fa-solid fa-bag-shopping"></i>
                </a>
                <a href=""
                    class="hover:text-[#0D3B66] tracking-wide hover:scale-105 transform transition duration-300">
                    <svg class="h-7 w-7" fill="currentColor" viewBox="0 0 576 512">
                        <path
                            d="M551.991 64H144.28l-8.726-44.608C133.35 8.128 123.478 0 112 0H12C5.373 0 0 5.373 0 12v24c0 6.627 5.373 12 12 12h80.24l69.594 355.701C150.796 415.201 144 430.802 144 448c0 35.346 28.654 64 64 64s64-28.654 64-64a63.681 63.681 0 0 0-8.583-32h145.167a63.681 63.681 0 0 0-8.583 32c0 35.346 28.654 64 64 64 35.346 0 64-28.654 64-64 0-18.136-7.556-34.496-19.676-46.142l1.035-4.757c3.254-14.96-8.142-29.101-23.452-29.101H203.76l-9.39-48h312.405c11.29 0 21.054-7.869 23.452-18.902l45.216-208C578.695 78.139 567.299 64 551.991 64zM208 472c-13.234 0-24-10.766-24-24s10.766-24 24-24 24 10.766 24 24-10.766 24-24 24zm256 0c-13.234 0-24-10.766-24-24s10.766-24 24-24 24 10.766 24 24-10.766 24-24 24zm23.438-200H184.98l-31.31-160h368.548l-34.78 160z" />
                    </svg>
                </a>
            </div>
        </div>
    </header>


    <div class="p-4">
        <table id="cartTable" border="1" cellspacing="0" class=" border border-gray-300 w-full text-center">
            <thead class="border-b border-gray-300">
                <tr class="text-center  border-gray-300">
                    <th class="p-2 border-l border-gray-300 ">Image</th>
                    <th class="p-2 border-l border-gray-300">Title</th>
                    <th class="p-2  border-l border-gray-300">Price</th>
                    <th class="p-2 border-l border-gray-300 ">Quantity</th>
                    <th class="p-2 border-l border-gray-300 ">Subtotal</th>
                    <th class="p-2  border-l border-gray-300">Action</th>
                </tr>
            </thead>
            <tbody id="cartBody">

            </tbody>
        </table>
    </div>

    <div class="flex justify-between items-center px-4 mb-4">
        <div id="cartTotal" class="mt-4 font-bold text-lg text-white">

        </div>

        <div id="checkoutBtn" class="mt-2">

        </div>
    </div>

    <section id="emptyCart" class="hidden flex-col items-center gap-4 h-[100vh]">

        <h1 class="text-3xl font-bold">Your Cart</h1>
        <div
            class="bg-gray-200 h-20 w-[95%] font-bold rounded-md shadow-xl text-center flex justify-center items-center">
            <p>Your cart is empty.</p>
        </div>

    </section>
   

    <footer class="bg-[#101828] w-full h-20">

        <div class="text-center py-7 text-white font-medium">
            <p>Â© E-Commerce. Thank you for visiting! All rights reserved.</p>
        </div>

    </footer>


    <script>

        let cart = JSON.parse(localStorage.getItem("cart"));

        const container = document.getElementById("cartTable");
        const empty = document.getElementById("emptyCart")

        if (!cart || cart.length === 0) {

            container.style.display = "none";
            empty.style.display = "flex";

        }

        else {
            container.style.display = "cartTable";
            empty.style.display = "none";
            cartData();
        }

        function cartData() {

            let cart = JSON.parse(localStorage.getItem("cart")) || [];

            const cartBody = document.getElementById("cartBody");
            const cartTotal = document.getElementById("cartTotal");
            const checkoutBtn = document.getElementById("checkoutBtn");
            cartBody.innerHTML = "";
            let total = 0;

            if (cart.length > 0) {
                cart.forEach((item, index) => {

                    const price = parseInt(item.price.toString().replace(/[^\d.-]/g, ''));
                    const quantity = item.quantity || 1;
                    const subtotal = price * quantity;
                    total += subtotal;

                    const row = document.createElement("tr");
                          row.className="border-b border-gray-300"
                    row.innerHTML =

                        `
<td class="flex justify-center border-r border-gray-300 "><img src="${item.image}" class="w-20 h-20 object-contain rounded"></td>
<td class=" border-r border-gray-300 text-white">${item.title}</td>
<td class=" border-r border-gray-300 text-white">$${price.toFixed(2)}</td>
<td class=" border-r border-gray-300 text-white">
<button onclick="updateQuantity(${index}, -1)" class="bg-black px-2 rounded">-</button>
<span class="mx-2">${quantity}</span>
<button onclick="updateQuantity(${index}, 1)" class="bg-black px-2 rounded">+</button>
</td>
<td class=" border-r border-gray-300 text-white"> $${subtotal.toFixed(2)}</td>
<td><button onclick="removeItem(${index})" class="bg-red-500 text-white px-3 py-1 rounded">Remove</button></td>
`;
                    cartBody.appendChild(row);
                });


            } else {

                container.style.display = "none";
                empty.style.display = "flex";
                cartTotal.style.display = "none";
                checkoutBtn.style.display = "none";

            }



            cartTotal.innerText = `Total:$${total.toFixed(2)}`;
            checkoutBtn.innerHTML = `<a href = "checkOut.html"><button class="bg-green-600 text-white px-4 py-2 mt-4 rounded">Checkout</button></a>`;
            // checkoutBtn.addEventListener('click',()=>{
            //     window.location='';
            // })
        }


        // cartData();

        function updateQuantity(index, change) {

            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            if (cart[index]) {
                cart[index].quantity += change;
                if (cart[index].quantity <= 0) {
                    cart.splice(index, 1);
                }
                localStorage.setItem("cart", JSON.stringify(cart));
                cartData();
            }
        }

        function removeItem(index) {

            let cart = JSON.parse(localStorage.getItem("cart")) || [];
            cart.splice(index, 1);
            localStorage.setItem("cart", JSON.stringify(cart));
            cartData();

        }

    </script>

</body>

</html>